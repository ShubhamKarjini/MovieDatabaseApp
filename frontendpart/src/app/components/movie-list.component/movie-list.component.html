<app-add-movie (movieAdded)="onMovieAdded()"></app-add-movie>

<div class="movie-container">
  <div class="movie-container">
  <div class="search-bar">
    <input 
      type="text" 
      placeholder="Search movies..." 
      (keyup)="onSearch($event.target.value)"
      class="search-input"
    />
  </div>

  <div class="filters">
    <select [(ngModel)]="selectedGenre" class="filter-select">
      <option value="">Select Genre</option>
      <option value="Action">Action</option>
      <option value="Drama">Drama</option>
      <option value="Comedy">Comedy</option>
      <option value="Horror">Horror</option>
    </select>
    
    <select [(ngModel)]="selectedYear" class="filter-select">
      <option value="">Select Year</option>
      <option value="2024">2024</option>
      <option value="2023">2023</option>
      <option value="2025">2025</option>
    </select>
    
    <button (click)="onFilter()" class="filter-btn">Filter</button>
  </div>

  <div *ngIf="loading$ | async" class="loading">Loading...</div>
  
  <div *ngIf="error$ | async as error" class="error">{{ error }}</div>

  <div class="movies-grid">
    <div *ngFor="let movie of movies$ | async" class="movie-card">
      <img [src]="movie.posterUrl" [alt]="movie.title" class="poster">
      <div class="movie-info">
        <h3>{{ movie.title }}</h3>
        <p class="year">{{ movie.releaseYear }}</p>
        <p class="rating">‚≠ê {{ movie.rating }}/10</p>
        <p class="director">Dir: {{ movie.director }}</p>
        <div class="actions">
          <button *ngIf="movie._id" (click)="deleteMovie(movie._id)" class="delete-btn">Delete</button>
        </div>
        <div class="actions">
  <div class="actions">
  <button 
    *ngIf="movie._id"
    (click)="editMovie(movie._id)" 
    class="edit-btn">
    Edit
  </button>
  <button 
    *ngIf="movie._id"
    (click)="deleteMovie(movie._id)" 
    class="delete-btn">
    Delete
  </button>
</div>
</div>
      </div>
    </div>
  </div>
</div>
</div>